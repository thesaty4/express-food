<div class="filter--header">
  <div class="close--wrapper">
    <p class="filter">Filter</p>
  </div>
  <div (click)="resetFilter()" class="reset-wrapper">
    <p class="filter">Reset All</p>
    <mat-icon class="material-icon" matSuffix>undo</mat-icon>
    <mat-icon (click)="closePopup()" class="material-icon" matSuffix
      >cancel</mat-icon
    >
  </div>
</div>
<div class="filter--form">
  <form [formGroup]="filterForm">
    <mat-tab-group>
      <mat-tab>
        <ng-template mat-tab-label>
          <svg
            class="svg"
            xmlns="http://www.w3.org/2000/svg"
            width="19.414"
            height="19.414"
            viewBox="0 0 19.414 19.414"
          >
            <path
              data-name="Path 3907"
              d="M19.414 72.3v1.138H0V72.3h1.959V58.286c0-.13.017-.195.174-.22 2.016-.329 4.032-.669 6.049-1.009.313-.051.628-.1.964-.157v15.384h1.142v-12.7h7.173V72.3zM6.375 70.674v1.615h1.117v-2.748H3.609v2.748h1.126v-1.615zM7.53 58.442H6.34v1.109h1.19zm0 9.442v-1.112H6.342v1.112zm5.542 0v-1.112h-1.186v1.112zm0 1.657h-1.184v1.112h1.187zm1.583 1.11h1.186v-1.107h-1.183zm-9.9-9.436H3.574v1.11h1.185zm1.581 1.108h1.189v-1.108H6.341zm5.544-1.112v1.119h1.184v-1.12zm2.776 0v1.112h1.184v-1.109zm-9.889 2.784H3.57v1.123c.374 0 .738 0 1.1-.005.032 0 .09-.067.091-.1.007-.331 0-.664 0-1.012zm2.762 1.115v-1.117H6.345v1.119zM13.074 64h-1.188v1.11h1.188zm2.771 0h-1.184v1.11h1.186zm-12.28 3.879h1.192v-1.107H3.565zm12.28-1.106h-1.184v1.108h1.185z"
              transform="translate(0 -54.023)"
            />
            <path
              data-name="Path 3908"
              d="M70.4 0c0 .618.012 1.236.008 1.853 0 .042-.086.111-.141.121-.813.143-1.627.278-2.442.414-.6.1-1.193.2-1.823.3V0z"
              transform="translate(-62.663)"
            />
          </svg>
        </ng-template>
        <div formGroupName="property">
          <div class="tab-head">
            Property
          </div>
          <div class="tab-head__padding">
            <div class="hotel-branch">
              Choose Brand or Hotel
            </div>
            <div>
              <div>
                <mat-form-field>
                  <mat-label>Brand</mat-label>
                  <mat-select formControlName="hotelName">
                    <mat-option
                      *ngFor="let hotel of hotelList"
                      [value]="hotel.value"
                      >{{ hotel.label }}</mat-option
                    >
                  </mat-select>
                </mat-form-field>
              </div>
              <div>
                <mat-form-field>
                  <mat-label>Hotel Name</mat-label>
                  <mat-select
                    formControlName="branchName"
                    (selectionChange)="handleHotelChange($event.value)"
                  >
                    <mat-option
                      *ngFor="let branch of branchList"
                      [value]="branch.value"
                      >{{ branch.label }}</mat-option
                    >
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </mat-tab>

      <mat-tab *ngIf="checkForTransactionFeedbackSubscribed()">
        <ng-template mat-tab-label>
          <svg
            class="svg"
            data-name="Booking Type(1)"
            xmlns="http://www.w3.org/2000/svg"
            width="19.359"
            height="18.187"
            viewBox="0 0 19.359 18.187"
          >
            <path
              data-name="Path 2306"
              d="M15.378 2.095H3.981a3.981 3.981 0 0 0-.024 7.962h1.788v-3.12A2.536 2.536 0 0 1 8.278 4.4h.006a2.537 2.537 0 0 1 2.528 2.533v3.119h4.566a3.981 3.981 0 0 0 0-7.962zM16.5 5.52l-2.264 2.269a.567.567 0 0 1-.8 0L12.3 6.655a.567.567 0 1 1 .8-.8l.733.733 1.867-1.87a.567.567 0 1 1 .8.8z"
              transform="translate(0 -2.095)"
            />
            <path
              data-name="Path 2307"
              d="m21.766 20.517-3.651-.379V15.8a1.4 1.4 0 1 0-2.8 0v7.256H15.3l-1.381-1.153a1.346 1.346 0 1 0-1.719 2.068L15 26.31h8.255v-4.1a1.7 1.7 0 0 0-1.489-1.693z"
              transform="translate(-8.437 -10.959)"
            />
            <path
              data-name="Path 2308"
              d="M24.588 62.148a.567.567 0 0 0 .567.567h6.806a.567.567 0 0 0 .567-.567v-1.134h-7.94z"
              transform="translate(-17.708 -44.528)"
            />
          </svg>
        </ng-template>
        <div formGroupName="outlets" *ngIf="outletFG">
          <div class="tab-head">
            Outlet
          </div>
          <div class="tab-head__padding">
            <div class="hotel-branch">
              Select Outlet
            </div>
            <div class="checkbox--wrapper" *ngFor="let outlet of outlets">
              <mat-checkbox
                *ngIf="outletFG.controls[outlet.id]"
                [formControlName]="outlet.id"
                (change)="onOutletSelect($event)"
                >{{ outlet.name }}</mat-checkbox
              >
            </div>
          </div>
        </div>
      </mat-tab>

      <mat-tab>
        <ng-template mat-tab-label>
          <svg
            class="svg"
            xmlns="http://www.w3.org/2000/svg"
            width="12.06"
            height="17.869"
            viewBox="0 0 12.06 17.869"
          >
            <path
              d="M84.994 12.457a2.4 2.4 0 0 1-1.912-.01.074.074 0 0 1 .044-.141 4.6 4.6 0 0 0 1.825.01.074.074 0 0 1 .043.142zm4.561-9.49A4 4 0 0 0 87.131 1.2a.3.3 0 0 0-.061-.5c-2.01-.967-4.742-1.071-6.445.571a5.455 5.455 0 0 0-1.476 3.979v1.6a.167.167 0 0 0 .334-.011V5.408a2.683 2.683 0 0 1 2.68-2.68h3.8a2.683 2.683 0 0 1 2.68 2.68v1.428a.167.167 0 0 0 .334.011V4.762a1.945 1.945 0 0 1 .563-1.373.3.3 0 0 0 .084-.173.318.318 0 0 0-.067-.249zm.537 12.846v1.759a.3.3 0 0 1-.3.3H78.33a.3.3 0 0 1-.3-.3v-1.76a3.072 3.072 0 0 1 3.073-3.073 1.238 1.238 0 0 0 .681-.2.3.3 0 0 1 .349.022 3.007 3.007 0 0 0 3.838-.009.3.3 0 0 1 .352-.021 1.236 1.236 0 0 0 .693.21 3.072 3.072 0 0 1 3.076 3.071zm-2.717.829a.3.3 0 0 0-.3-.3h-.893a.3.3 0 0 0 0 .6h.893a.3.3 0 0 0 .3-.302zM85.96 3.324h-3.8a2.087 2.087 0 0 0-2.084 2.084v2.461a3.983 3.983 0 0 0 7.965-.015V5.408a2.087 2.087 0 0 0-2.081-2.084z"
              transform="translate(-78.032)"
            />
          </svg>
        </ng-template>
        <div formGroupName="guest">
          <div class="tab-head">
            Guest
          </div>
          <div class="tab-head__padding">
            <div formGroupName="guestCategory">
              <p class="guest-title">Select Guest Category</p>
              <div class="checkbox--wrapper">
                <mat-checkbox formControlName="isRepeatedGuest"
                  >Repeat Guest</mat-checkbox
                >
                <mat-checkbox formControlName="isNewGuest"
                  >New Guest</mat-checkbox
                >
              </div>
            </div>
            <div formGroupName="guestType">
              <p class="guest-title">Select Guest Type</p>
              <div class="checkbox--wrapper">
                <mat-checkbox formControlName="isVip">VIP</mat-checkbox>
                <mat-checkbox formControlName="isMembership"
                  >Membership</mat-checkbox
                >
                <mat-checkbox formControlName="isGeneral">General</mat-checkbox>
              </div>
            </div>
          </div>
        </div>
      </mat-tab>
      <mat-tab
        *ngIf="
          checkForStayFeedbackSubscribed() ||
          checkForTransactionFeedbackSubscribed()
        "
      >
        <ng-template mat-tab-label>
          <svg
            class="svg"
            xmlns="http://www.w3.org/2000/svg"
            width="19.359"
            height="16.854"
            viewBox="0 0 19.359 16.854"
          >
            <path
              data-name="Path 3909"
              d="M100.51 14.222a.449.449 0 0 0-.042.055.563.563 0 0 1-.857.241c-.617-.378-1.234-.756-1.843-1.147a1.746 1.746 0 0 0-1-.285c-.825.011-1.651 0-2.476 0h-.231c.04-.337.071-.66.118-.98a2.582 2.582 0 0 0-2.087-2.968 6.121 6.121 0 0 0-.846-.05h-.258c.083-.4.179-.781.236-1.166a3.36 3.36 0 0 0-.056-1.645 2.4 2.4 0 0 0-1.983-1.7 1.644 1.644 0 0 0-1.726.8c-.622.955-1.233 1.916-1.85 2.874-.037.058-.076.115-.134.2-.008-.074-.017-.118-.017-.162V.64a.57.57 0 0 1 .618-.629c3.389 0 6.779-.016 10.167 0a4.274 4.274 0 0 1 4.231 3.774 1.453 1.453 0 0 0 .035.144zM92.941 3.414h4.5c.075 0 .151 0 .226-.006a.562.562 0 0 0 .1-1.1.981.981 0 0 0-.261-.031H88.38a.981.981 0 0 0-.242.027.555.555 0 0 0-.41.487.537.537 0 0 0 .328.563.993.993 0 0 0 .35.054q2.268.008 4.535.006zm2.309 2.268h2.325a.557.557 0 0 0 .594-.552.566.566 0 0 0-.589-.579q-2.334-.007-4.668 0a.57.57 0 0 0-.561.372.562.562 0 0 0 .555.76c.782.003 1.563-.001 2.344-.001zm0 2.269h2.305a.563.563 0 0 0 .573-.35.569.569 0 0 0-.581-.784h-4.595a.583.583 0 0 0-.584.337.558.558 0 0 0 .536.8c.781.007 1.562 0 2.343 0z"
              transform="translate(-81.152 -.005)"
            />
            <path
              data-name="Path 3910"
              d="M0 183.585a.72.72 0 0 1 .753-.4c.768.016 1.536 0 2.3.005.454 0 .658.206.658.655v6.27c0 .446-.211.651-.662.655-.768.008-1.536.007-2.3.032a.707.707 0 0 1-.749-.411z"
              transform="translate(0 -173.946)"
            />
            <path
              data-name="Path 3911"
              d="M96.053 119.8v-3.025a.5.5 0 0 1 .09-.252c.368-.572.745-1.137 1.115-1.708.394-.607.782-1.218 1.174-1.827a.654.654 0 0 1 .876-.292 1.378 1.378 0 0 1 .895 1.243 5.271 5.271 0 0 1-.449 2.2c-.027.064-.057.127-.084.19a.562.562 0 0 0 .547.838c.472.005.945 0 1.418 0a1.413 1.413 0 0 1 1.452 1.155 3.233 3.233 0 0 1-.023.9c-.116 1.039-.247 2.076-.374 3.113a1.307 1.307 0 0 1-1.372 1.21c-1.115 0-2.23-.013-3.345.006a3.292 3.292 0 0 1-1.63-.388.466.466 0 0 1-.3-.5c.017-.958.007-1.916.007-2.874z"
              transform="translate(-91.205 -106.957)"
            />
          </svg>
        </ng-template>
        <div formGroupName="feedback">
          <div class="tab-head">
            Feedback
          </div>
          <div class="tab-head__padding">
            <div class="hotel-branch">
              Select Feedback Type
            </div>
            <mat-radio-group formControlName="feedbackType">
              <mat-radio-button
                *ngIf="checkForStayFeedbackSubscribed()"
                value="STAYFEEDBACK"
                (change)="handleFeedbackTypeChange($event)"
                >Stay Experience</mat-radio-button
              >
              <mat-radio-button
                *ngIf="checkForTransactionFeedbackSubscribed()"
                value="TRANSACTIONALFEEDBACK"
                (change)="handleFeedbackTypeChange($event)"
                >Transactional</mat-radio-button
              >
              <mat-radio-button
                *ngIf="
                  checkForStayFeedbackSubscribed() &&
                  checkForTransactionFeedbackSubscribed()
                "
                value="ALL"
                (change)="handleFeedbackTypeChange($event)"
                >Both</mat-radio-button
              >
            </mat-radio-group>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
    <button
      [disabled]="isDisabled || isTokenLoading"
      type="button"
      (click)="applyFilter()"
      class="apply-button"
    >
      Apply
    </button>
  </form>
</div>
